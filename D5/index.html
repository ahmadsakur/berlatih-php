<!doctype html>
<html lang="en">

<head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

   <!-- Bootstrap CSS -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
   <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"
      integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous">
   </script>

   <title>JavaScript DOM</title>
</head>

<body>
   <div class="container">
      <nav class="navbar navbar-light bg-light">
         <a class="navbar-brand">Mini Ecommerce</a>
         <form class="form-inline" id="formItem">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" id="keyword" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" id="searchItem">Search</button>
         </form>
         <button class="btn btn-primary" id="cart"><i class="fas fa-shopping-cart"></i> 0 </button>
      </nav>
      <div class="row mt-2 justify-content-center" id="listBarang">

      </div>

      <script>
         var items = [
            ['001', 'Keyboard Logitek', 60000, 'Keyboard yang mantap untuk kantoran', 'logitech.jpg'],
            ['002', 'Keyboard MSI', 300000, 'Keyboard gaming MSI mekanik', 'msi.jpg'],
            ['003', 'Mouse Genius', 50000, 'Mouse Genius biar lebih pinter', 'genius.jpeg'],
            ['004', 'Mouse Jerry', 30000, 'Mouse yang disukai kucing', 'jerry.jpg']
         ]

         // soal1

         var listBarang = document.getElementById("listBarang");

         function printItems(array) {
            var temp = "";
            for (var i = 0; i < array.length; i++) {
               var currentItem = array[i]
               temp += `<div class="col-md-4 mt-2">
                           <div class="card" style="width: 18rem;">
                              <img src="${currentItem[4]}" class="card-img-top" width="150px">
                              <div class="card-body">
                                 <h5 class="card-title" id="itemName">${currentItem[1]}</h5>
                                 <p class="card-text" id="itemDesc">${currentItem[3]}</p>
                                 <p class="card-text">Rp.${currentItem[2]}</p>
                                 <a href="#" class="btn btn-primary" id="addCart">Tambahkan ke keranjang</a>
                              </div>
                           </div>
                        </div>`
            }
            listBarang.innerHTML = temp
         }
         printItems(items)


         //soal 2
         function filter(keyword) {
            var filteredItems = []
            for (var j = 0; j < items.length; j++) {
               var item = items[j];
               var namaItem = item[1]
               var isMatch = namaItem.toLowerCase().includes(keyword.toLowerCase())
               if (isMatch == true) {
                  filteredItems.push(item)
               }
            }
            return filteredItems
         }
         var formSearch = document.getElementById("formItem")
         formSearch.addEventListener("submit", function (event) {
            event.preventDefault()
            var keyword = document.getElementById("keyword").value
            var hasilFilter = filter(keyword)
            printItems(hasilFilter)
         })

         var inputSearch = document.getElementById("keyword")
         inputSearch.addEventListener("keyup", function (event) {
            var value = event.target.value
            var filterDenganKeyup = filter(value)
            printItems(filterDenganKeyup)
         })
         //soal3
         var count = 0;
         listBarang.addEventListener("click", function (x) {
            if (x.target.id === 'addCart') {
               count++;
               var cart = document.getElementById('cart');
               cart.innerHTML = '<i class="fas fa-shopping-cart"></i>' + count + ''
            }
         })
      </script>
      <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
         integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
         integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous">
      </script>

      <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->
</body>

</html>